

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating a manifest &mdash; Project 0.1.0-7884b5b 2017-08-14 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Project 0.1.0-7884b5b 2017-08-14 documentation" href="../../index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Project
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow/git-workflow.html">Git workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflow/github-tips-and-tricks.html">GitHub Tips and Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Base Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci-and-cd/index.html">Continuous integration and deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sdk/index.html">Software Development Kit</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">Project</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
    <li>Creating a manifest</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/chapters/baseplatform/creating-a-manifest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-a-manifest">
<h1>Creating a manifest<a class="headerlink" href="#creating-a-manifest" title="Permalink to this headline">¶</a></h1>
<p>Manifest repositories are used to store repo tool <a class="footnote-reference" href="#repotool" id="id1">[1]</a> manifests. These manifests are used, in repo tool, to fetch all the sources, tools and scripts needed to build a PELUX-based system.</p>
<p>The PELUX project contains a good reference <a class="footnote-reference" href="#pelux-manifests" id="id2">[2]</a> for how a manifest repository
should look like. When creating a new manifest repository, it is a good idea to duplicate the PELUX manifests, and see which parts can be kept in your own manifests.</p>
<p>It is not necessary to <code class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span></code> the PELUX manifests, since the git history is likely not important for your project. Instead of <code class="docutils literal"><span class="pre">git</span> <span class="pre">clone</span></code>:ing the manifests, you may opt to simply copy them. To do this, browse to the PELUX manifests GitHub page <a class="footnote-reference" href="#pelux-manifests" id="id3">[2]</a>, and press the “Clone or download” button, then press “Download ZIP”.</p>
<p>In the examples below, it is assumed that the downloaded zip is named “pelux-manifests.zip”.</p>
<div class="section" id="creating-a-git-repo-for-the-new-manifests">
<h2>Creating a git repo for the new manifests<a class="headerlink" href="#creating-a-git-repo-for-the-new-manifests" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">repo</span></code> tool assumes all manifests to be stored in a git repo, to keep track of changes, thus a new git repository must be created for the manifests.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir my-manifests
$ <span class="nb">cd</span> my-manifests
$ git init
$ unzip &lt;path-to-zip&gt;/pelux-manifests.zip
</pre></div>
</div>
<p>Do not stage and commit the newly unpacked files just yet. Some tweaks must be done to the files before they can be re-used by your project.</p>
</div>
<div class="section" id="tweaking-the-manifest-files">
<h2>Tweaking the manifest files<a class="headerlink" href="#tweaking-the-manifest-files" title="Permalink to this headline">¶</a></h2>
<p>Below follows general recommendations for modifications of common files.</p>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">ci-scripts</span></code> directory can likely be kept as-is, if these scripts seem useful for your project</li>
<li>The <code class="docutils literal"><span class="pre">doc</span></code> directory should contain extra documentation for the repository, if applicable</li>
<li>The vagrant-cookbook directory should contain a <code class="docutils literal"><span class="pre">git</span> <span class="pre">submodule</span></code> pointing to <code class="docutils literal"><span class="pre">git&#64;github.com:Pelagicore/vagrant-cookbook.git</span></code>, or a different repository containing vagrant scripts. This submodule is used by the <code class="docutils literal"><span class="pre">Vagrantfile</span></code>, and is only needed if Vagrant <a class="footnote-reference" href="#vagrant" id="id4">[3]</a> is used for the project.</li>
<li>CONTRIBUTING, LICENSE, and README should be updated according to the <code class="docutils literal"><span class="pre">pelux-manifests</span></code> license and your project guidelines</li>
<li>The <code class="docutils literal"><span class="pre">Dockerfile</span></code> can likely be left as-is, and can be customized according to your project needs for Docker builds</li>
<li>The <code class="docutils literal"><span class="pre">Jenkinsfile</span></code> sets up a Jenkins <a class="footnote-reference" href="#jenkins" id="id5">[4]</a> pipeline <a class="footnote-reference" href="#jenkinspipeline" id="id6">[5]</a> for Continuous Integration (CI) builds of your manifest. This file must be modified to accomodate your project. In particular:
* Directory names must be updated (for example, the TEMPLATECONF variable bust be set to match your layer structure)
* Image names must be updated to reflect your own image names (<code class="docutils literal"><span class="pre">core-image-pelux</span></code> may become <code class="docutils literal"><span class="pre">core-image-yourproject</span></code>)
* In general, this file can be customized to suite your project’s CI needs</li>
<li>The <code class="docutils literal"><span class="pre">Vagrantfile</span></code> should be usable as-is, but can be modified to accommodate your project’s CI and virtualized build needs</li>
<li>The <code class="docutils literal"><span class="pre">xml</span></code> files in the repository are the actual manifest files. The manifest files in the repository must be modified to indicate the correct repositories. It is common to structure the manifets files in a hierachical fashion, such that a common base manifest is created, and (possibly several) specialized manifests include this base manifest. An example of this can be seen in the PELUX manifests repository, where the <code class="docutils literal"><span class="pre">pelux-base.xml</span></code> manifest is included in, for instance, the <code class="docutils literal"><span class="pre">pelux-intel.xml</span></code> and <code class="docutils literal"><span class="pre">pelux-rpi.xml</span></code> manifests.</li>
</ul>
<table class="docutils footnote" frame="void" id="repotool" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="https://source.android.com/source/using-repo">https://source.android.com/source/using-repo</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="pelux-manifests" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id2">1</a>, <a class="fn-backref" href="#id3">2</a>)</em> <a class="reference external" href="https://github.com/Pelagicore/pelux-manifests">https://github.com/Pelagicore/pelux-manifests</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="vagrant" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[3]</a></td><td><a class="reference external" href="https://source.android.com/source/using-repo">https://source.android.com/source/using-repo</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="jenkins" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[4]</a></td><td><a class="reference external" href="https://www.vagrantup.com/">https://www.vagrantup.com/</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="jenkinspipeline" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[5]</a></td><td><a class="reference external" href="https://jenkins.io/doc/book/pipeline/">https://jenkins.io/doc/book/pipeline/</a></td></tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Pelagicore AB.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.0-7884b5b 2017-08-14',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>